# Elefante Memory System Configuration
# Version: 1.0.0
#
# NOTE: Paths are now automatically resolved to absolute paths by config.py
# to prevent database "amnesia" when starting from different directories.
# You can override these with environment variables if needed.

elefante:
  version: "1.0.0"
  # data_dir is auto-set to absolute path in config.py
  anonymized_telemetry: false

  # Vector Store Configuration (ChromaDB)
  vector_store:
    type: "chromadb"
    # persist_directory is auto-set to absolute path in config.py
    collection_name: "memories"
    embedding_model: "all-MiniLM-L6-v2"
    embedding_dimension: 384
    distance_metric: "cosine"

  # Graph Store Configuration (Kuzu)
  graph_store:
    type: "kuzu"
    # database_path is auto-set to absolute path in config.py
    buffer_pool_size: "512MB"
    max_num_threads: 4

  # Hybrid Query Orchestrator
  orchestrator:
    default_mode: "hybrid" # Options: semantic, structured, hybrid
    vector_weight: 0.5 # Weight for semantic search (0.0-1.0)
    graph_weight: 0.5 # Weight for graph search (0.0-1.0)
    max_results: 10 # Maximum results to return
    min_similarity: 0.3 # Minimum similarity threshold

  # MCP Server Configuration
  mcp_server:
    name: "elefante"
    version: "1.0.0"
    description: "Local AI Memory System with Vector and Graph Storage"
    # Optional HTTP endpoint (leave commented for stdio only)
    # port: 3000
    # host: "localhost"

  # Embedding Service Configuration
  embeddings:
    provider: "sentence-transformers" # Local-only (no external AI API calls)
    model: "all-MiniLM-L6-v2"
    device: "cpu" # Options: cpu, cuda, mps (for Apple Silicon)
    batch_size: 32
    normalize: true

  # LLM Configuration
  # Elefante does NOT connect to an LLM. Any LLM usage must be handled by the calling agent.
  # (Kept as a placeholder for legacy configs; currently ignored by runtime.)
  llm:
    provider: "agent-managed"
    model: ""
    temperature: 0.0
    max_tokens: 0

  # Logging Configuration
  logging:
    level: "INFO" # Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
    format: "json" # Options: json, text
    # file path is auto-set to absolute path in config.py
    max_size: "10MB"
    backup_count: 5
    console: true

  # Memory Management
  memory:
    auto_consolidate: false # Automatic memory consolidation (future feature)
    consolidation_threshold: 1000 # Number of memories before consolidation
    importance_decay: false # Decay importance over time (future feature)
    max_age_days: 365 # Maximum age before archival (0 = never)
  
  # Temporal Memory Decay & Reinforcement (v1.2.0)
  temporal_decay:
    enabled: true # Enable adaptive memory strength
    default_decay_rate: 0.01 # 1% per day (0.0-1.0)
    default_reinforcement_factor: 0.1 # 10% boost per access (0.0-1.0)
    semantic_weight: 0.7 # Weight for semantic similarity (0.0-1.0)
    temporal_weight: 0.3 # Weight for temporal strength (0.0-1.0)
    consolidation:
      enabled: false # Background archival of low-strength memories
      interval_hours: 24 # Run every 24 hours
      strength_threshold: 0.1 # Archive memories below this strength (0.0-1.0)
      archive_threshold_days: 180 # Only archive memories older than this

  # Performance Tuning
  performance:
    cache_embeddings: true
    cache_size: 1000
    parallel_queries: true
    query_timeout: 30 # seconds

  # Feature Flags
  features:
    enable_graph_store: true
    enable_vector_store: true
    enable_auto_tagging: false # AI-powered auto-tagging (future)
    enable_deduplication: true

  # Elefante Mode (v1.1.0) - Transaction-Scoped Locking
  # Lock per operation (milliseconds), not per session (hours)
  # Stale locks auto-expire after 30 seconds
  elefante_mode:
    enabled: true  # v1.1.0: Always enabled (backward compat - this field is ignored)
    lock_timeout_seconds: 5  # Max time to wait for lock acquisition
    cleanup_on_disable: true  # Release all resources when switching to OFF

  # User Profile Configuration
  user_profile:
    user_name: "EnterpriseUser"
    user_id: "enterprise_user_001"
    auto_link_first_person: true
    detect_code_blocks: true
# Made with Bob
